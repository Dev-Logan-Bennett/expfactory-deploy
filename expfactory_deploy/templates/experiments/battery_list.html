{% extends "base.html" %}

{% block content %}
    <h2>Battery Templates</h2>
      {% for battery in object_list %}
        {% regroup battery.children.all by status as child_list %}
            <h3>
              <a href="{% url 'experiments:battery-update'  battery.id %}">{{ battery.title }}</a> -
              <a href="{% url 'experiments:battery-clone' battery.id %}"> Clone </a>
            </h3>
              <div class="child-battery-lists">
              {% for status, children in child_list %}
              <h4>{{ status }}</h4>
              <ul>
                {% for child in children %}
                  <li>
                    <a href="{% url 'experiments:battery-update'  child.id %}">
                      {{ child.title|default:"No Title" }}
                    </a> - Created: {{ child.created|date:"Y-m-d" }} - <a href="{% url 'experiments:battery-clone' child.id%}">Clone</a>
                  </li>
                {% endfor %}
              </ul>
              {% empty %}
              <h4>No Children</h4>
              {% endfor %}
              </div>
      {% empty %}
        <li> No Batteries</li>
      {% endfor %}
  </ul>
    <a href="{% url 'experiments:battery-create' %}"> create </a>
{% endblock %}
